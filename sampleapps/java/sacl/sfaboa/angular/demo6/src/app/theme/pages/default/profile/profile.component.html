<!-- BEGIN: Subheader -->
<div class="m-subheader" appunwraptag="">
	<div class="d-flex align-items-center">
		<div class="mr-auto">
			<h3 class="m-subheader__title">
				My Profile
			</h3>
		</div>

	</div>
	<!-- END: Subheader -->
	<div class="m-content">
		<div class="row">

			<div class="col-xl-12">
				<div class="m-portlet m-portlet--full-height m-portlet--tabs">
					<div class="m-portlet__head">
						<div class="m-portlet__head-tools">
							<ul class="nav nav-tabs m-tabs m-tabs-line   m-tabs-line--left m-tabs-line--primary" role="tablist">
								<li class="nav-item m-tabs__item">
									<a class="nav-link m-tabs__link active" data-toggle="tab" href="#m_user_profile_tab_1" role="tab">
										<i class="flaticon-share m--hide"></i>
										FIDO2 Registered Keys
									</a>
								</li>
								<li class="nav-item m-tabs__item">
									<a class="nav-link m-tabs__link" data-toggle="tab" href="#m_user_profile_tab_2" role="tab">
										Advanced
									</a>
								</li>
							</ul>
						</div>
					</div>
					<div class="tab-content">
						<div class="tab-pane active" id="m_user_profile_tab_1">
							<div class="m-portlet__head">
								<div class="m-portlet__head-caption">
									<div class="m-portlet__head-title">
										<ul class="nav nav-pills nav-pills--brand m-nav-pills--align-right m-nav-pills--btn-pill m-nav-pills--btn-sm" role="tablist">
											<li class="nav-item m-tabs__item">
												<button class="btn btn-accent m-btn m-btn--custom m-btn--icon m-btn--pill m-btn--air" data-toggle="modal" data-target="#newKeyModal" >
													REGISTER NEW KEY
												</button> &nbsp;&nbsp;
											</li>
											<li class="nav-item m-tabs__item">
												<button class="btn btn-accent m-btn m-btn--custom m-btn--icon m-btn--pill m-btn--air" (click)="deleteKeys()">
													DELETE SELECTED KEYS
												</button>
											</li>
										</ul>
									</div>
								</div>
							</div>
							<div class="m-portlet__body">
								<table class="table table-striped- table-bordered table-hover table-checkable" id="m_table_1">
									<thead>
										<tr>
											<th>
												SELECT
											</th>
											<th>
												DISPLAY NAME
											</th>
											<th>
												DATE REGISTERED
											</th>
											<th>
												DATE LAST USED
											</th>
										</tr>
									</thead>
									<tbody>
										<tr *ngFor="let key of fidoKeys; let i = index">
											<td>
												<div class="m-widget2__checkbox">
													<label class="m-checkbox m-checkbox--solid m-checkbox--single m-checkbox--brand">
														<input type="checkbox" [(ngModel)]="key.checked" name="isChecked{{i}}">
														<span></span>
													</label>
												</div>
											</td>
											<td>{{ key.displayName }}</td>
											<td>{{ key.createDate | date:'medium' }}</td>
											<td *ngIf="key.modifyDate != 0">{{ key.modifyDate | date:'medium'}}</td>
											<td *ngIf="key.modifyDate == 0">{{ 'never' }}</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
						<div class="tab-pane" id="m_user_profile_tab_2">
							<div class="m-portlet__body">
								<div class="form-group m-form__group row">
									<div class="col-lg-10 col-md-8 col-sm-6"></div>
									<button class="btn btn-danger m-btn m-btn--custom m-btn--icon m-btn--pill m-btn--air" (click)="deleteUser()">
										Delete My Account
									</button>
								</div>
								<form class="m-form m-form--fit m-form--label-align-right">
									<div class="m-form__seperator m-form__seperator--space m-form__seperator--dashed" style=" margin-left: 30px; margin-right: 30px;"></div>
									<div class="m-form__section m-form__section--first">
										<div class="form-group m-form__group row">
											<label class="col-lg-3 col-form-label">
												Firstname
											</label>
											<div class="col-lg-6">
												<input class="form-control m-input" type="text" name="firstname" [(ngModel)]="user.firstName" readonly>
											</div>
										</div>
										<div class="form-group m-form__group row">
											<label class="col-lg-3 col-form-label">
												Lastname
											</label>
											<div class="col-lg-6">
												<input class="form-control m-input" type="text" name="lastname" [(ngModel)]="user.lastName" readonly>
											</div>
										</div>
										<div class="form-group m-form__group row">
											<label class="col-lg-3 col-form-label">
												Email
											</label>
											<div class="col-lg-6">
												<input class="form-control m-input" type="text" name="email" [(ngModel)]="user.email" readonly>
											</div>
										</div>
									</div>
								</form>
							</div>
						</div>
					</div>
				</div>
				<div class="modal fade" id="newKeyModal" tabindex="-1" role="dialog" aria-labelledby="newKeyModalLabel" aria-hidden="true" data-backdrop="false">
					<div class="modal-dialog" role="document">
						<div class="modal-content">
							<div class="modal-header">
								<h2 class="modal-title" style="font-weight: bold;">Register New Key</h2>
								<button type="button" class="close" data-dismiss="modal" aria-label="Close" #closeNewKeyModal>
									<span aria-hidden="true">&times;</span>
								</button>
							</div>
							<div class="modal-body">
								You are trying to add additional keys to the existing keys.
								<br>
								<br>
								<div class="form-group m-form__group row">
									<label class="col-sm-4 col-form-label" style="font-weight: bold;">
										Display Name
									</label>
									<div class="col-sm-8">
										<input class="form-control m-input" type="text" name="displayname" [(ngModel)]="newDisplayName" required>
									</div>
								</div>
								<br>
								<div class="form-group m-form__group row">
									<div class="col-sm-8"></div>
									<button class="btn btn-danger m-btn m-btn--custom m-btn--icon m-btn--pill m-btn--air" (click)="addKey()">Add Key</button>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
